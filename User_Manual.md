# 1. Overview
QSmart is an AI-assisted body wellness tracking system. It combines:
A .NET 8 Web API backend (QSmartBackend)
A Blazor Server Web Dashboard (qSmartWebDashboard)
A Flutter mobile app (qsmart_mobile)
Together, they let you:
Manage users (admin)
View and analyze posture/tension/heart-rate sessions
Generate PDF progress reports
Let end-users log in on mobile, start new sessions, and view a body tension heatmap
This manual explains:
How someone with no tools installed can set everything up locally
How to run each part (backend, dashboard, mobile)
What every major page and button does
# 2. Project Structure (What’s in the ZIP)
From the root of the ZIP:
QSmart/
QSmart.sln – solution containing the QSmartBackend API
QSmartBackend/
Program.cs – backend startup/config
Controllers/
SessionController.cs
ReadingController.cs
UserController.cs
AdminController.cs
ReportController.cs
DAL/
AppDbContext.cs – Identity (login users)
GenerateDB.sql – SQL script to build tables
SeedDB.sql – SQL script to seed sample data
session_mock.json – sample readings
Models/
AppUser.cs – identity user (with FullName, Role)
Session.cs – session summary data
Reading.cs – detailed sensor readings
QSmartDBContext.cs – DB-first context for QSmartDB
qSmartWebDashboard/
qSmartWebDashboard.sln – Blazor Server dashboard
qSmartWebDashboard/Components/Pages/
Login.razor – admin login page
Dashboard.razor – readings overview & user list
UserManagement.razor – manage users (edit/delete)
UserProgress.razor – detailed per-user progress + PDF export
Data/ApiDataService.cs – calls the backend at http://localhost:5111
Services/AuthState.cs – dashboard authentication state
wwwroot/images/ – logo & chair image
qsmart_mobile/
Flutter project
lib/main.dart – app entry point
lib/routes.dart – route definitions
lib/pages/
login_page.dart
home_shell.dart
dashboard_page.dart
new_session_page.dart
body_scan_screen.dart
profile_page.dart
settings_page.dart
lib/services/
qsmart_api.dart – calls backend at http://10.0.2.2:5111 (emulator)
auth_service.dart, auth_state.dart, mock_repo.dart, body_map_service.dart
assets/images/ – front/back body silhouettes + logo
# 3. Prerequisites (Before You Run Anything)
## 3.1 Backend & Web Dashboard
You need:
Windows 10/11
Visual Studio 2022 with:
“ASP.NET and web development”
.NET 8 SDK (VS installer can handle this)
SQL Server LocalDB (comes with VS Community)
Optional but recommended: SQL Server Management Studio (SSMS) to run the .sql scripts.
## 3.2 Mobile App
You need:
Flutter SDK
Android Studio or Visual Studio Code with Flutter/Dart extensions
Either:
Android Emulator or
Physical Android phone (connected via USB, on the same Wi-Fi as your PC)
# 4. Database Setup
The backend expects a SQL Server database named QSmartDB with tables for users,
sessions, readings, etc.
If you already have a working QSmartDB on (localdb)\MSSQLLocalDB, you can skip to
Section 5.
## 4.1 Create Database
Open SQL Server Management Studio (SSMS).
Connect to:
Server: (localdb)\MSSQLLocalDB
Run:
CREATE DATABASE QSmartDB;
GO
## 4.2 Create Tables & Seed Data
In SSMS, open:
QSmart/QSmartBackend/DAL/GenerateDB.sql
Set database to QSmartDB and execute the script to create the schema.
Then open:
QSmart/QSmartBackend/DAL/SeedDB.sql
Execute it to insert sample Users, Sessions, and Readings rows.
These scripts seed business data (Users/Sessions/Readings), not Identity login accounts.
Identity user accounts are handled by the API itself.
# 5. Running the Backend API (QSmartBackend)
## 5.1 Open the Solution
Open Visual Studio 2022.
File → Open → Project/Solution…
Select:
QSmart/QSmart.sln
## 5.2 Verify Connection Strings
Open:
QSmart/QSmartBackend/appsettings.json
You will see something like:
"ConnectionStrings": {
 "DefaultConnection":
"Server=(localdb)\\MSSQLLocalDB;Database=QSmartDB;Trusted_Connection=True;TrustS
erverCertificate=True;",
 "QSmartConnection":
"Server=(localdb)\\MSSQLLocalDB;Database=QSmartDB;Trusted_Connection=True;TrustS
erverCertificate=True;"
}
If your SQL Server instance is different, update Server=... accordingly.
## 5.3 Start the API
In Solution Explorer, right-click QSmartBackend → Set as Startup Project.
At the top, choose the http profile (not IIS Express).
Press F5 (or the green Run button).
The backend will:
Apply EF Core migrations for both contexts (Identity AppDbContext and business
QSmartDBContext) using:
db.Database.Migrate();
qsmartDb.Database.Migrate();
Host the API on something like http://localhost:5111 (used by the dashboard & mobile).
A browser window should open to Swagger at:
http://localhost:5111/swagger
## 5.4 Main API Responsibilities
You don’t need to call all endpoints manually, but here’s what they do:
Identity Endpoints (generated by app.MapIdentityApi<AppUser>())
POST /register – Create an AppUser with email/password/FullName/Role
POST /login – Log in and issue an access token or cookie (depending on query params)
UserController ( /api/user )
GET /api/user – List application users (for admin & dashboard)
POST /api/user – Create a new user with a role and password
PUT /api/user/{id} – Update basic user info
DELETE /api/user/{id} – Delete user
SessionController ( /api/session )
List sessions, get sessions per user, create new sessions from mobile, etc.
ReadingController ( /api/reading )
Get readings for a session, per user, etc. Used by:
Web dashboard → UserProgress charts
Body scan screen on mobile
AdminController ( /api/admin )
Admin-level operations for user overview and per-user sessions.
admin-register - post a new admin role account to log into the dashboard
ReportController ( /api/report )
GET /api/report/userprogress/{userId}?sessionId=...
Generates a PDF report using QuestPDF (this is what the dashboard “Export PDF” button
calls).
# 6. Running the Web Dashboard (qSmartWebDashboard)
## 6.1 Open Dashboard Solution
Open Visual Studio 2022 (or reuse the same instance).
File → Open → Project/Solution…
Pick:
qSmartWebDashboard/qSmartWebDashboard.sln
## 6.2 Start the Dashboard
In Solution Explorer, set qSmartWebDashboard as Startup Project.
Ensure the http profile is selected.
launchSettings.json is configured for:
http://localhost:5084
Press F5.
This launches the Blazor Server dashboard at:
http://localhost:5084/
## 6.3 How the Dashboard Talks to the Backend
Data/ApiDataService.cs sets:
_httpClient.BaseAddress ??= new Uri("http://localhost:5111");
All dashboard actions (login, listing users, loading sessions/readings, exporting PDF) call
the backend API.
Make sure:
Backend (QSmartBackend) is running first
Then run the dashboard
Otherwise you’ll see “backend error” messages when loading data.
# 7. Running the Flutter Mobile App (qsmart_mobile)
## 7.1 Install Dependencies
Install Flutter SDK
Install Android Studio or VS Code with Flutter & Dart plugins
Set up:
An Android Emulator, or
A physical Android phone
## 7.2 Configure Backend URL
Open:
qsmart_mobile/lib/services/qsmart_api.dart
You’ll see:
static const String _baseUrl = 'http://10.0.2.2:5111';
Using Android Emulator on the same machine as backend:
Keep 10.0.2.2 – it is the special alias from emulator → host PC.
Using a physical device:
Find your PC’s IP on the LAN (e.g. 192.168.0.23).
Change _baseUrl to:
static const String _baseUrl = 'http://192.168.0.23:5111';
Ensure the phone and PC are on the same Wi-Fi.
Make sure firewall allows inbound HTTP on port 5111.
## 7.3 Run the App
From a terminal inside qsmart_mobile:
flutter pub get
flutter run
Select the emulator/device. The app should open on the Login screen.
# 8. Using the Web Dashboard – Pages & Buttons
## 8.1 Login Page (/)
File: Components/Pages/Login.razor
Purpose: Admin/clinician login.
Key elements:
Email textbox
Password textbox
Login button
Error message area under the form
What happens when you login:
Calls ApiDataService.LoginAsync(LoginViewModel)
→ POST login?useCookies=true on the backend
Backend sets an auth cookie (Identity).
Dashboard stores current user in AuthState.
On success, navigates to /dashboard.
If credentials are invalid or backend is offline:
You’ll see error text such as “Invalid email or password” or “Login error: …”
Note: You must have created an AppUser (admin) via Swagger /register or via your existing
database/setup.
## 8.2 Dashboard Page (/dashboard)
File: Components/Pages/Dashboard.razor
Purpose: High-level view of QSmart users and quick access to their progress.
Top bar:
QSmart logo + “QSMART Readings”
Tagline: “Muscle Relief”
Buttons:
User Management → navigates to /UserManagement
Logout → signs out via Auth.SignOut() and returns to login
Filters section:
User search (by name/email/ID)
Generic search (free text)
“Rows to show” dropdown: 50 / 100 / 250 / 500
Clear button resets filters
Main table:
Each row shows a user entry (flattened from backend):
Timestamp (created date)
User Name
User ID
Email
View button
View button:
Clicking “View” calls ViewMember(r.UserId)
Navigates to /userprogress/{userId} for that user
States:
“Initializing…” – Auth not loaded yet
“Redirecting…” – user is not admin; redirected
“Loading…” – data fetch in progress
## 8.3 User Management Page (/UserManagement)
File: Components/Pages/UserManagement.razor
Purpose: CRUD for users (admin side).
Header:
QSmart logo
Title: “User Management”
Buttons:
Dashboard – back to /dashboard
Logout
Controls:
Search box – filter by name, email, or ID
Add / Edit Form (when showForm is true):
Full Name
Email
Role (e.g., Admin, User)
Password (when creating or resetting)
Buttons:
Save – calls backend to create/update user
Cancel
User table:
For each user row (from ViewRows()):
Name + ID
Email
Role (badge – Admin in red, others blue)
Created date
Action buttons (at the end):
Edit – opens inline edit form
Delete – opens confirmation banner
Delete confirmation:
Banner saying: “Delete <FullName> (<Email>)?“
Buttons:
Yes, delete – calls backend delete endpoint, reloads list
Cancel
Error/success messages shown at the bottom of the section using error / successMessage
fields.
## 8.4 User Progress Page (/userprogress/{UserId})
File: Components/Pages/UserProgress.razor
Purpose: Detailed analytics for a single user.
What it shows:
User identity: name, email, code
Summary stats:
Number of sessions
Total readings
Average tension, heart rate, stress, recovery
Session list:
Each session with:
Date/time
Region
Activity label
Per-session averages
Readings per session:
Table with:
Timestamp
Region
Activity label
Tension Score
Heart Rate
Posture Angle
StressIndex, RecoveryScore, etc. (depending on data)
Key buttons:
Back to Dashboard – GoDashboard()
Back to User Management – GoUsers()
Export PDF – ExportPdf()
Export PDF button:
Builds a URL:
var backendBaseUrl = "http://localhost:5111";
var url = $"{backendBaseUrl}/api/report/userprogress/{UserId}";
Nav.NavigateTo(url, forceLoad: true);
Browser downloads or opens a QuestPDF-generated PDF summarizing the user’s sessions
and readings.
# 9. Using the Mobile App – Pages & Buttons
## 9.1 Login Screen
File: lib/pages/login_page.dart
Fields & UI:
Email text field
Password text field
Log In button
Error message at the top if login fails
Full-screen gradient background with QSmart styling
Flow:
Validates the form (non-empty email + password).
Builds a LoginRequest and calls AuthService.login(request).
AuthService:
Calls QSmartApi.instance.login(email, password):
POST {_baseUrl}/login?useCookies=false&useSessionCookies=false
Stores the returned accessToken in AuthState.accessToken.
Calls /api/user/me (via getCurrentUser) to resolve identity into a User object.
On success:
Navigates to HomeShell (Routes.home) with the current User.
If login fails:
_errorMessage is populated with a human-readable message.
## 9.2 Home Shell (bottom navigation)
File: lib/pages/home_shell.dart
Tabs:
Dashboard
New Session
Profile
Settings
At the bottom there’s a persistent BottomNavigationBar:
Tapping a tab:
Updates _selectedIndex
Shows the corresponding screen
When returning to Dashboard, increments _dashboardVersion to force refresh.
## 9.3 Dashboard Page (User Dashboard)
File: lib/pages/dashboard_page.dart
Purpose: Show the latest session & quick metrics.
Key pieces:
Last Session Card (_LastSessionCard)
Shows:
Session date/time
Region
Activity
Tension score
Heart rate
Posture angle
Quick stats
e.g. average tension, last 7 days’ stats (based on data from MockRepo / backend)
Buttons:
Start New Session (primary button)
Calls _onStartNewSession():
Navigates to Routes.newSession (NewSessionPage)
View Map (outlined button)
Navigates to Routes.bodyScanner (BodyScanScreen)
If there is no session data:
Shows an empty state card with guidance like “No sessions yet – start one!”
## 9.4 New Session Page
File: lib/pages/new_session_page.dart
Purpose: Let user create a new session.
Controls:
Session Region (dropdown)
Examples: Neck, Upper Back, Lower Back, Shoulders, etc.
Activity Label dropdown
Options like “Stretch Routine”, “Office Break”, “Workout Recovery”, etc.
Sliders:
Tension score (0–100)
Posture angle (degrees)
Heart rate (BPM)
Optional notes text field
Buttons:
Start Session:
Validates inputs
Uses MockRepo.startNewSession / QSmartApi.createSession to send session data to
backend
On success:
Shows a snackbar: “New session started successfully!”
Navigates to Body Scan screen:
Navigator.of(context).pushNamed(
 Routes.bodyScanner,
 arguments: persisted.sessionId,
);
## 9.5 Body Scan Screen (Tension Map Scanner)
File: lib/pages/body_scan_screen.dart
Widgets: BodyScannerMap, TensionDot, data from BodyMapService
Purpose: Visual tension map of the body based on readings.
Key features:
AppBar: “Tension Map Scanner”
Toggle between Front and Back views:
Uses BodySide.front / BodySide.back and appropriate image:
assets/images/frontbody.png
assets/images/backbody.png
Uses BodyScannerMap to:
Draw the body silhouette
Overlay circular tension dots at the correct positions
Color intensity = severity (0–1 scaled to %)
Interactions:
Tap on a dot:
Shows a SnackBar:
“Region: <name> (Tension: XX%)”
Tension data is fetched via:
BodyMapService.getTensionDataForSession(sessionId) or default aggregated view
Data is based on recent Readings from MockRepo and/or backend
## 9.6 Profile Page
File: lib/pages/profile_page.dart
Purpose: Personal profile & goals.
What it displays:
Current user’s:
Name
Email
Derived metrics from recent sessions:
Top tension region
Average recovery / stress indices
Controls:
“Athlete type” selection
“Recovery goal” selection
Uses a dialog (SimpleDialog) with options like:
Reduce muscle tension
Improve posture & alignment
Track recovery after training
Profile is demo-focused – it uses MockRepo and recent data to simulate “smart” suggestions.
## 9.7 Settings Page
File: lib/pages/settings_page.dart
Purpose: User preferences & demo AI coach.
Toggles:
Dark mode (demo only – UI already uses dark theme)
Session reminders
Vibration / haptics
AI coach tips
Buttons:
Preview AI Coach Tip
If _demoCoachTips is enabled:
Shows a dialog with a random coaching tip from _coachTips
If not:
Shows a SnackBar telling the user to enable tips first
Reset to defaults
Resets toggles to:
Dark mode: on
Notifications: on
Haptics: on
AI coach tips: on
Shows a snackbar “Settings reset to demo defaults”
All settings are stored only for the current session (no persisted storage).
# 10. Typical End-to-End Workflows
## 10.1 Admin Reviewing a User
Start Backend (QSmartBackend) → ensure http://localhost:5111/swagger works.
Create an admin Identity user (via Swagger /register, role Admin) if one doesn’t exist.
Start Dashboard at http://localhost:5084/.
On Login page, sign in with admin credentials.
On Dashboard:
Use filters if needed.
Click View on a user row → opens User Progress.
On User Progress:
Review charts and tables.
Click Export PDF to generate a progress report.
## 10.2 End User Logging Sessions via Mobile
Backend running at http://localhost:5111.
Mobile app running with _baseUrl pointed correctly.
User logs in via Login screen (same Identity credentials).
On Dashboard tab:
See last session summary.
Tap Start New Session.
On New Session:
Choose region, activity, tension, heart rate, posture angle.
Tap Start Session.
App sends data to backend and redirects to Body Scan:
User can see tension dots visualized over the body.
Data becomes visible in:
Web dashboard tables
UserProgress analytics
Future mobile analytics cards
# 11. Troubleshooting
Dashboard says “Initializing” forever
Backend might be offline.
Check http://localhost:5111/swagger.
Ensure CORS policy in Program.cs matches http://localhost:5084.
Login fails on both dashboard and mobile
Confirm Identity user exists via /register endpoint (Swagger).
Confirm database is reachable via appsettings.json.
Check console/terminal logs for EF or SQL errors.
Mobile app can’t reach backend
For Emulator:
_baseUrl must be http://10.0.2.2:5111.
For device:
_baseUrl must be http://<PC_LAN_IP>:5111.
PC firewall must allow inbound port 5111.
Database errors (e.g., table not found)
Make sure QSmartDB exists and you ran:
GenerateDB.sql
SeedDB.sql
# 12. Deployment Guide (Azure)
Note: Our student Azure accounts were used during development.
This section explains how you (or any future owner) could deploy QSmart using your own
Azure subscription.
## 12.1 Deploying the Backend API (QSmartBackend) to Azure
Goal: Host the .NET 8 backend on Azure App Service with an Azure SQL Database.
### 12.1.1 Create Azure SQL Database
Sign in to the Azure Portal.
Create a SQL Database:
Resource type: SQL Database
Database name: QSmartDB (or any name; just remember it)
Create a new SQL Server (e.g., qsmart-sql-server):
Choose admin username/password
Pricing tier: any basic tier is fine for demo/testing.
Once created, go to the SQL Database → Networking:
Allow Azure services to connect.
If needed, temporarily allow your IP to run the seed scripts.
In SSMS (or Azure Data Studio), connect to the Azure SQL server (using the admin user).
Run the same scripts used locally:
GenerateDB.sql
SeedDB.sql
This will create the Sessions, Readings, and related tables in Azure.
### 12.1.2 Update Backend Connection Strings for Azure
In the backend project (QSmartBackend):
Open appsettings.json (or better, appsettings.Production.json if you have one).
Replace the existing connection strings with the Azure SQL one, something like:
"ConnectionStrings": {
 "DefaultConnection": "Server=tcp:<your-sql-server>.database.windows.net,1433;Initial
Catalog=QSmartDB;Persist Security Info=False;User
ID=<username>;Password=<password>;MultipleActiveResultSets=False;Encrypt=True;Tru
stServerCertificate=False;Connection Timeout=30;",
 "QSmartConnection": "Server=tcp:<your-sql-server>.database.windows.net,1433;Initial
Catalog=QSmartDB;Persist Security Info=False;User
ID=<username>;Password=<password>;MultipleActiveResultSets=False;Encrypt=True;Tru
stServerCertificate=False;Connection Timeout=30;"
}
In a real deployment, you’d put this in Azure App Service → Configuration rather than
checking passwords into source control.
### 12.1.3 Publish Backend to Azure App Service
In Visual Studio 2022, right-click the QSmartBackend project → Publish…
Choose:
Target: Azure
Specific target: Azure App Service (Windows)
Create a new App Service:
Name: e.g., qsmart-backend-api
Runtime: .NET 8 (LTS)
Hosting plan: basic is fine for testing.
Click Publish.
After publishing, you’ll get a public URL like:
https://qsmart-backend-api.azurewebsites.net
This is now your backend base URL.
## 12.2 Deploying the Web Dashboard (qSmartWebDashboard) to Azure
Goal: Host the Blazor Server dashboard as a separate Azure App Service that talks to the
Azure backend.
### 12.2.1 Point Dashboard to the Azure Backend
In qSmartWebDashboard:
Open Data/ApiDataService.cs.
Change the backend base address from local:
_httpClient.BaseAddress ??= new Uri("http://localhost:5111");
to your Azure backend URL:
_httpClient.BaseAddress ??= new Uri("https://qsmart-backend-api.azurewebsites.net");
(Use your actual App Service URL.)
### 12.2.2 Publish Dashboard to Azure
In Visual Studio, right-click the qSmartWebDashboard project → Publish…
Target: Azure App Service (Windows) again.
Create a new App Service, e.g., qsmart-dashboard.
Publish.
You’ll get a public URL like:
https://qsmart-dashboard.azurewebsites.net
Now:
The dashboard is publicly accessible.
It talks to the backend over HTTPS using the configured base URL.
### 12.2.3 CORS / Authentication Notes
Since this is Blazor Server, most rendering happens on the server; the dashboard calls the
backend through server-side HTTP.
If you later expose pure browser-based calls, configure CORS on the backend to allow the
dashboard domain (e.g., https://qsmart-dashboard.azurewebsites.net).
## 12.3 Pointing the Mobile App to the Azure Backend
Once the backend is in Azure, the mobile app no longer needs localhost or 10.0.2.2.
In qsmart_mobile/lib/services/qsmart_api.dart:
// BEFORE (local dev):
static const String _baseUrl = 'http://10.0.2.2:5111';
// AFTER (Azure):
static const String _baseUrl = 'https://qsmart-backend-api.azurewebsites.net';
Rebuild the app:
flutter clean
flutter pub get
flutter run # for dev
or
flutter build apk # for a release APK
Any device with internet access can now use the app, as long as it can reach the Azure API
URL.
## 12.4 Summary of Deployment Changes
Backend
Move from (localdb)\MSSQLLocalDB to Azure SQL Database
Deploy QSmartBackend to Azure App Service
Use Azure connection strings
Dashboard
Change ApiDataService base URL → Azure backend URL
Deploy qSmartWebDashboard to Azure App Service
Mobile
Change QSmartApi._baseUrl → Azure backend URL